<!DOCTYPE html>
<html lang="es">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Marie Kids ‚Ä¢ Ajedrez ‚Ä¢ Clase 3: ¬øD√≥nde est√° la pieza?</title>

        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#1976d2">

        <style>
            * {
                box-sizing: border-box;
                font-family: system-ui, -apple-system, "Segoe UI", sans-serif
            }

            body {
                margin: 0;
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                background: linear-gradient(145deg, #dbeafe, #e0f2fe);
                padding: 18px;
            }

            .app {
                background: #fff;
                width: 100%;
                max-width: 520px;
                padding: 18px;
                border-radius: 24px;
                box-shadow: 0 16px 40px rgba(0, 0, 0, .12);
                border: 3px solid #2563eb;
            }

            .header {
                padding: 14px;
                border-radius: 22px;
                margin-bottom: 10px;
                background: linear-gradient(135deg, #93c5fd, #60a5fa, #2563eb);
                color: #fff;
                font-weight: 900;
                text-align: center;
                cursor: pointer;
            }

            h1 {
                text-align: center;
                margin: 6px 0
            }

            .subtitle {
                text-align: center;
                color: #6b7280;
                font-size: .95rem
            }

            .status {
                display: flex;
                justify-content: space-between;
                padding: 8px 12px;
                background: #eff6ff;
                border-radius: 999px;
                border: 1px solid #bfdbfe;
                font-size: .9rem;
                margin: 8px 0;
            }

            .progress {
                height: 10px;
                background: #e5e7eb;
                border-radius: 999px;
                overflow: hidden;
                margin-bottom: 10px;
            }

            .progress-inner {
                height: 100%;
                width: 0%;
                background: #2563eb;
                transition: .3s;
            }

            .card {
                background: #f9fafb;
                border: 1px solid #e5e7eb;
                border-radius: 20px;
                padding: 14px;
            }

            .piece-question {
                text-align: center;
                font-weight: 900;
                font-size: 1.2rem;
                margin-bottom: 6px;
                color: #1d4ed8;
            }

            .board {
                display: grid;
                grid-template-columns: repeat(8, 1fr);
                aspect-ratio: 1/1;
                max-width: 300px;
                margin: 8px auto;
                border-radius: 18px;
                overflow: hidden;
                border: 2px solid #bfdbfe;
            }

            .sq {
                aspect-ratio: 1 / 1;
                /* üîë fuerza cuadrado */
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.8rem;
                line-height: 1;
                /* üîë evita que el emoji estire */
                cursor: pointer;
                font-weight: 900;
            }

            .light {
                background: #eff6ff
            }

            .dark {
                background: #93c5fd
            }

            .options {
                display: flex;
                gap: 8px;
                margin-top: 10px;
            }

            .option {
                flex: 1;
                padding: 10px;
                border-radius: 14px;
                border: 1px solid #d1d5db;
                background: #fff;
                font-weight: 900;
                cursor: pointer;
            }

            .option:disabled {
                opacity: .6
            }

            .feedback {
                text-align: center;
                font-weight: 900;
                min-height: 22px;
                margin-top: 6px;
            }

            .good {
                color: #16a34a
            }

            .bad {
                color: #ef4444
            }

            .controls {
                display: flex;
                gap: 10px;
                margin-top: 10px;
            }

            .btn {
                flex: 1;
                padding: 10px;
                border-radius: 999px;
                border: none;
                font-weight: 900;
                background: #2563eb;
                color: #fff;
                cursor: pointer;
            }
        </style>
    </head>

    <body>
        <div class="app">

            <div class="header" onclick="location.href='index.html'">
                ‚ôüÔ∏è Academia de Ajedrez Mauro ‚Ä¢ Clase 3
            </div>

            <h1>¬øD√≥nde est√° la pieza?</h1>
            <p class="subtitle">Observa la pieza y responde su coordenada</p>

            <div class="status">
                <div>‚úÖ Bien: <b id="ok">0</b></div>
                <div>üìä <b id="count">0/10</b></div>
            </div>

            <div class="progress">
                <div class="progress-inner" id="bar"></div>
            </div>

            <div class="card">
                <div class="piece-question" id="question"></div>

                <div class="board" id="board"></div>

                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
            </div>

            <div class="controls">
                <button class="btn" onclick="next()">Siguiente</button>
                <button class="btn" onclick="share()">üì§ Compartir</button>
            </div>

        </div>

        <script>
            const files = ["a", "b", "c", "d", "e", "f", "g", "h"];
            const pieces = [
                { n: "rey", s: "‚ôî" },
                { n: "dama", s: "‚ôï" },
                { n: "torre", s: "‚ôñ" },
                { n: "alfil", s: "‚ôó" },
                { n: "caballo", s: "‚ôò" },
                { n: "pe√≥n", s: "‚ôô" }
            ];

            let target = "", piece = {}, ok = 0, total = 0, locked = false;

            function speak(t) {
                const u = new SpeechSynthesisUtterance(t);
                u.lang = "es-ES"; u.rate = .9;
                speechSynthesis.cancel(); speechSynthesis.speak(u);
            }

            function randomCoord() {
                return files[Math.floor(Math.random() * 8)] + (Math.floor(Math.random() * 8) + 1);
            }

            function buildBoard() {
                const b = document.getElementById("board");
                b.innerHTML = "";
                for (let r = 8; r >= 1; r--)
                    for (let f = 0; f < 8; f++) {
                        const d = document.createElement("div");
                        d.className = "sq " + (((f + r) % 2) ? "dark" : "light");
                        b.appendChild(d);
                    }
            }

            function next() {
                locked = false;
                buildBoard();
                document.getElementById("feedback").textContent = "";

                target = randomCoord();
                piece = pieces[Math.floor(Math.random() * pieces.length)];

                const idx = (8 - (+target[1])) * 8 + files.indexOf(target[0]);
                document.querySelectorAll(".sq")[idx].textContent = piece.s;

                document.getElementById("question").textContent = `¬øEn qu√© casilla est√° el ${piece.n}?`;
                speak(`¬øEn qu√© casilla est√° el ${piece.n}?`);

                renderOptions();
            }

            function renderOptions() {
                const o = document.getElementById("options");
                o.innerHTML = "";
                const set = new Set([target]);
                while (set.size < 3) set.add(randomCoord());
                [...set].sort(() => Math.random() - .5).forEach(c => {
                    const b = document.createElement("button");
                    b.className = "option";
                    b.textContent = c;
                    b.onclick = () => check(c, b);
                    o.appendChild(b);
                });
            }

            function check(c, b) {
                if (locked) return;
                const f = document.getElementById("feedback");
                if (c === target) {
                    ok++; total++; locked = true;
                    f.textContent = "¬°Correcto!";
                    f.className = "feedback good";
                    speak("¬°Muy bien!");
                    document.querySelectorAll(".option").forEach(x => x.disabled = true);
                } else {
                    f.textContent = "Intenta otra vez";
                    f.className = "feedback bad";
                    speak("Intenta otra vez");
                    b.disabled = true;
                }

                document.getElementById("ok").textContent = ok;
                document.getElementById("count").textContent = `${total}/10`;
                document.getElementById("bar").style.width = (total / 10 * 100) + "%";

                if (total === 10) {
                    setTimeout(() => {
                        speak("Excelente. Terminaste la clase tres");
                        alert("üéâ Clase 3 completada");
                    }, 400);
                }
            }

            function share() {
                const d = { title: "Marie Kids Ajedrez", text: "Clase 3: ¬øD√≥nde est√° la pieza?", url: location.href };
                navigator.share ? navigator.share(d) : (navigator.clipboard.writeText(d.url), alert("Link copiado"));
            }

            next();
        </script>

    </body>

</html>
